![](https://valerio65.github.io/assets/img/gassert.png )
<center>

V. Terragni, G. Jahangirova, P. Tonella, M. Pezzè.  
Università della Svizzera italiana (USI), Lugano, Switzerland 
</center>

**GAssert will be open source soon!**

TOOL:  
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.3877078.svg)](https://doi.org/10.5281/zenodo.3877078)

evaluation results of our ESEC/FSE paper:  
[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.3876638.svg)](https://doi.org/10.5281/zenodo.3876638)

to cite this work

```
@inproceedings{Terragni:gassert:ESECFSE:2020,
	author = {Terragni, Valerio and Jahangirova, Gunel and Tonella, Paolo and Pezz{\`{e}}, Mauro},
	title = {Evolutionary Improvement of Assertion Oracles},
	booktitle = {Proceedings of the 2020 Joint Meeting on Foundations of Software Engineering, {ESEC/FSE} 2020}
	series = {ESEC/FSE~'20},
	  pages={1178--1189},
	year = {2020},
	  publisher={ACM}
	
}
```



## Artifact Description

GAssert is a tool for automatically improving assertion oracles in Java programs.
Assertion oracles are executable boolean expression placed inside the program at a specific program point.
A perfect assertion oracle should pass (return true) for all correct executions and fail (return false) for all incorrect executions. 

Because designing perfect oracles is difficult, oracles may fail to distinguish between correct and incorrect executions. 
In other words, they might have false positives (FP) and false negatives (FN).
Intuitively, a FP is a correct state in which the assertion oracle incorrectly fails, while a FN is a incorrect state in which the assertion oracle incorrectly passes.

Given an assertion oracle and evidence of FPs and FNs, GAssert implements an evolutionary algorithm that explores the space of possible assertions to identify a new assertion with fewer FPs and FNs.
GAssert relies on the tool [OASIs](https://github.com/guneljahan/OASIs) to gain evidence of FPs and FNs.
               
## How to reproduce the evaluation results


To reproduce the evaluation results you must first follow the installation instructions described in the file [INSTALL.md](INSTALL.md)

After that, you can run the evaluation as follows: go to the main folder of GAssert artifact, then from the command line perform the following commands.

```
	cd scripts
	./run_evaluation.sh
```

>**IMPORTANT**: in a single machine the evaluation will run for about **70 consecutive days.** We manage to run the experiments in a reasonable time using many Amazon AWS machines in parallel. If you just want to try GAssert on a single subject or on a new subject please refer to the instructions in [INSTALL.md](INSTALL.md).



## Description of the evaluation results

The `./run_evaluation.sh` will run our 34 subjects for three oracle improvement approaches that we analysed (see our paper for more details):

*	GASSERT: the technique presented in this paper
*  RANDOM: a random variant of oracle improvement
*  DAIKON: daikon-based oracle improvement


The experiments will also repeat 10 times to cope with the stochasticity of the evolutionary-based and random-based approaches.

After each experiments ends, the script will create a zip file under the folder `subject_results` with an appropriate name : `subjectName_methodName_assertionType_seedNumber.zip`.
For example, `StringUtils_stripToNull_daikon.assertions_GASSERT_4.zip` will contain the results of tool GASSERT, with the subject StringUtils, method stripToNull, starting from a daikon generated assertion, seed number four.

All subjects will run with daikon-generated invariants. Some of the subjects will run also with a human-written assertion (see RQ3). 
The "assertionType" can be either "daikon.assertions" or "human.assertions" depending on whether the initial assertion was generated by Daikon (in RQ1, RQ2) or have been adopted from the previous study analysing human oracle improvement (in RQ3). The "seed_num" have values between 0 and 9, as we have re-run each approach 10 times to account for the stochastic nature of search-based.

>**IMPORTANT**: For each subject, the initial sets of correct and incorrect states will be generated only once. All three tools will refer to the same initial sets.

Each zip file contains the following subfolders:
	
-	**orig** - contains the Java source code of the subject class.
-	**evosuite-initial-tests** - contains initial  test cases generated by EvoSuite. These test cases were used to generated correct states for GAssert and Random.
- **initial-mutations** - contains initial mutations generated by Major. This mutations along with the EvoSuite test cases were used to generate incorrect states for GAssert.
- **input-assertions** - contains file "daikon.assertions" where Daikon-generated initial assertions are located. In case the subject was part of RQ3, where the comparison with human improvement was performed (i.e., SE1 SE2, SE3, SE4, SA3, SA4, SA3, SA4) the subfolder contains also file "human.assertions" with the initial assertions used in those experiments (if any).
- **human-generated-assertions** - contains the assertions improved by humans (if any).
- **randoop-evaluation-tests** - contains test cases generated by Randoop for the evaluation of the improved assertions.
- **all-tests** - contains all tests used during the specific run, including OASIs generated ones
- **output** - contains csv files with evaluation the results. The file "info-iterations.csv" reports results at each iteration. The file "result-validation-init-output.csv" reports results with initial set of Major mutations and EvoSuite test cases, while the file "result-validation-output.csv" reports results with validation test cases generated by Randoop and mutations generated by PIT.
- **logs** - contains all the log files obtained during the experimental procedure.

You can find the already computed results of our experiments at [![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.3876638.svg)](https://doi.org/10.5281/zenodo.3876638)








